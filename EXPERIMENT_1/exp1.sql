CREATE TABLE BOOK_S(
BOOK_ID INT PRIMARY KEY,
BOOK_NAME VARCHAR(20) NOT NULL,
AUTHOR_NAME VARCHAR(20) NOT NULL
)

SELECT * FROM BOOK_S

ALTER TABLE BOOK_S
ADD BOOK_COUNT INT CHECK(BOOK_COUNT>0) NOT NULL

INSERT INTO BOOK_S VALUES(101,'HARRY POTTER','DAVID',3)



CREATE TABLE LIBRARY_VISITORS(
USER_ID INT PRIMARY KEY,
NAME VARCHAR(20) NOT NULL,
AGE INT CHECK(AGE>=17) NOT NULL,
EMAIL VARCHAR(20) NOT NULL UNIQUE
)

SELECT * FROM LIBRARY_VISITORS

INSERT INTO LIBRARY_VISITORS VALUES(501,'SUMIR MALHOTRA',20,'SUMIR227@GMAIL.COM')



CREATE TABLE BOOK_ISSUE(
BOOK_ISSUE_ID INT PRIMARY KEY,
USER_ID INT NOT NULL,
BOOK_ID INT NOT NULL,
FOREIGN KEY(BOOK_ID) REFERENCES BOOK_S(BOOK_ID),
FOREIGN KEY(USER_ID) REFERENCES LIBRARY_VISITORS(USER_ID)
)

INSERT INTO BOOK_ISSUE VALUES(701,501,101)

SELECT * FROM BOOK_ISSUE

ALTER TABLE BOOK_ISSUE ADD ISSUE_DATE DATE

UPDATE BOOK_ISSUE SET ISSUE_DATE='2026-01-09' WHERE BOOK_ISSUE_ID=701


CREATE ROLE LIBRARIAN WITH LOGIN PASSWORD 'Sumir@12'


GRANT SELECT,INSERT,DELETE,UPDATE ON BOOK_S TO LIBRARIAN
GRANT SELECT,INSERT,DELETE,UPDATE ON BOOK_ISSUE TO LIBRARIAN
GRANT SELECT,INSERT,DELETE,UPDATE ON LIBRARY_VISITORS TO LIBRARIAN

REVOKE SELECT,INSERT,DELETE,UPDATE ON BOOK_S,BOOK_ISSUE,LIBRARY_VISITORS FROM LIBRARIAN